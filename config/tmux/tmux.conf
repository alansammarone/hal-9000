# Minimal tmux config - just for bottom spacing

# Remap prefix from Ctrl+b to Ctrl+Space (easier to hit)
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Mouse support (scroll normally, click to select panes)
set -g mouse on

# True color support
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Start window/pane numbering at 1
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Status bar for bottom spacing
set -g status-position bottom
set -g status-style bg=default,fg=default
set -g status-left ""
set -g status-right ""
set -g status-justify centre

# Enable status bar (for bottom spacing)
set -g status on

# No status bar content (just empty space for padding)
set -g status-format[0] ''
set -g status-format[1] ''
set -g status-format[2] ''
set -g status-format[3] ''
set -g status-format[4] ''
set -g status-format[5] ''
set -g status-format[6] ''
set -g status-format[7] ''
set -g status-format[8] ''
set -g status-format[9] ''

# Don't wait for escape sequences (makes nvim feel snappier)
set -sg escape-time 0

# Larger scrollback buffer
set -g history-limit 50000

# Use system clipboard
set -g set-clipboard on

# Vi mode for copy mode (if you ever use it)
setw -g mode-keys vi

# Exit client when session is destroyed (don't leave orphaned sessions)
set -g detach-on-destroy off

# Kill session when all windows are closed
set -g destroy-unattached on

# Forward pane titles to Kitty's tab/window titles. #T passes through whatever title
# the shell or program inside the pane sets (via escape sequences).
set -g set-titles on
set -g set-titles-string "#T"
setw -g allow-rename on
setw -g automatic-rename on

# Allow escape sequences tmux doesn't recognize to pass through to Kitty. Needed for
# Kitty's shell integration to work properly (sends OSC sequences for features like
# directory tracking, though we don't currently use that due to complexity).
set -g allow-passthrough on

# Keyboard scrolling: Cmd+up/down in Kitty sends Shift+up/down, which we intercept here.
# Scrolling up enters copy-mode (tmux's scrollback viewer), then scrolls. The -e flag
# makes copy-mode exit automatically when you scroll back down to the live view. Scrolling
# down just sends scroll-down, which works both in copy-mode and exits it when at bottom.
# See .config/kitty/kitty.conf for the Cmd+up/down mappings that trigger this.
bind-key -n S-Up copy-mode -e \; send-keys -X scroll-up
bind-key -n S-Down send-keys -X scroll-down
